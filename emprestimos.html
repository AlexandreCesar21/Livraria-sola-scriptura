<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Carrinho de Empréstimos</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="CSS/emprestimos.css" />
    
  </head>
  <body>
    <div id="dashboard" class="dashboard">
      <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-logo">Livraria</div>
          <div class="sidebar-logo">Sola Scriptura</div>
        </div>
        <div class="sidebar-nav">
          <a class="nav-item" data-section="dashboard" href="dashboard.html">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard</span>
          </a>
          <a class="nav-item" data-section="books" href="livros.html">
            <i class="fas fa-warehouse"></i>
            <span>Livros</span>
          </a>
          <a class="nav-item" data-section="clients" href="clientes.html">
            <i class="fas fa-address-book"></i>
            <span>Clientes</span>
          </a>
          <a class="nav-item" data-section="sales" href="venda.html">
            <i class="fas fa-cash-register"></i>
            <span>Vendas</span>
          </a>
          <a class="nav-item active" data-section="loans" href="emprestimos.html">
            <i class="fas fa-handshake"></i>
            <span>Empréstimos</span>
          </a>
          <a class="nav-item" data-section="reports" href="relatorios.html">
            <i class="fas fa-chart-line"></i>
            <span>Relatórios</span>
          </a>
          <a class="nav-item" data-section="products" href="produtos.html">
            <i class="fas fa-shopping-bag"></i>
            <span>Produtos Diversos</span>
          </a>
          <a class="nav-item" data-section="bookstore" href="livraria.html">
            <i class="fas fa-store"></i>
            <span>Livraria</span>
          </a>
          <a class="nav-item" data-section="users" href="usuarios.html">
            <i class="fas fa-user-cog"></i>
            <span>Usuários</span>
          </a>
          <a class="nav-item" href="#" onclick="UIManager.handleLogout()">
            <i class="fas fa-sign-out-alt"></i>
            <span>Sair</span>
          </a>
        </div>
        <div
          style="
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
          "
        >
          <button
            class="btn-icon"
            id="sidebarToggle"
            style="
              background: var(--primary-color);
              color: white;
              border: none;
              width: 40px;
              height: 40px;
              border-radius: 50%;
              cursor: pointer;
              transition: var(--transition);
              position: relative;
              top: 90px;
            "
          >
            <i class="fas fa-chevron-left"></i>
          </button>
        </div>
      </nav>
      <main class="main-content">
        <header class="topbar">
          <div class="topbar-left">
            <button class="mobile-menu-btn" id="mobileMenuBtn">
              <i class="fas fa-bars"></i>
            </button>
            <h1 id="pageTitle">Painel Administrativo</h1>
          </div>
          <div class="topbar-right">
            <div class="user-info">
              <div class="user-avatar">A</div>
              <div class="user-details">
                <div class="user-name" id="currentUser">Admin</div>
                <div class="user-role">Administrador</div>
              </div>
            </div>
          </div>
        </header>
        <div class="content-area">
          <section id="loansSection">
            <div class="card">
              <div class="card-header">
                <div>
                  <h2 class="card-title">Carrinho de Empréstimos</h2>
                  <p class="card-subtitle">
                    Adicione múltiplos livros ao carrinho e registre o
                    empréstimo
                  </p>
                </div>
                <div class="card-actions">
                  <button class="btn btn-outline btn-sm" id="clearLoanCartBtn">
                    <i class="fas fa-trash"></i>
                    Limpar Carrinho
                  </button>
                </div>
              </div>
            
              <div
                style="
                  background: var(--background-secondary);
                  padding: 24px;
                  border-radius: var(--border-radius);
                  margin-bottom: 24px;
                "
              >
                <h3
                  style="
                    color: var(--primary-color);
                    margin-bottom: 16px;
                    font-size: 1.1rem;
                  "
                >
                  <i class="fas fa-plus-circle"></i> Adicionar Livro ao Carrinho
                  de Empréstimo
                </h3>
                <div class="form-grid">
                  <div class="form-group">
                    <label class="form-label">Livro *</label>
                    <select
                      class="form-select"
                      id="loanCartBookSelect"
                      required=""
                    >
                      <option value="">Selecione um livro disponível</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="form-label">Quantidade *</label>
                    <input
                      class="form-input"
                      id="loanCartQuantity"
                      min="1"
                      placeholder="Digite a quantidade"
                      required=""
                      type="number"
                    />
                  </div>
                  <div class="form-group">
                    <button
                      class="btn btn-primary"
                      id="addToLoanCartBtn"
                      type="button"
                    >
                      <i class="fas fa-cart-plus"></i>
                      Adicionar ao Carrinho
                    </button>
                  </div>
                </div>
              </div>
            
              <div id="loanCart" style="margin-bottom: 24px">
                <div class="card-header" style="margin-bottom: 16px">
                  <h3 style="color: var(--primary-color); font-size: 1.1rem">
                    <i class="fas fa-book-reader"></i> Livros no Carrinho (<span
                      id="loanCartItemCount"
                      >0</span
                    >)
                  </h3>
                </div>
                <div id="loanCartItems">
                  <div class="empty-state" style="padding: 40px 20px">
                    <i
                      class="fas fa-book-reader"
                      style="font-size: 3rem; opacity: 0.3; margin-bottom: 16px"
                    ></i>
                    <h3>Carrinho vazio</h3>
                    <p>
                      Adicione livros ao carrinho para registrar um empréstimo
                    </p>
                  </div>
                </div>
              </div>
            
              <div id="loanCheckoutSection" style="display: none">
                <div
                  style="
                    background: var(--white);
                    border: 2px solid var(--primary-color);
                    border-radius: var(--border-radius);
                    padding: 24px;
                  "
                >
                  <h3
                    style="
                      color: var(--primary-color);
                      margin-bottom: 20px;
                      font-size: 1.2rem;
                    "
                  >
                    <i class="fas fa-handshake"></i> Finalizar Empréstimo
                  </h3>
                  <form class="form-grid" id="loanCheckoutForm">
                    <div class="form-group">
                      <label class="form-label">Cliente *</label>
                      <select
                        class="form-select"
                        id="loanCheckoutClientSelect"
                        required=""
                      >
                        <option value="">Selecione o cliente</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label class="form-label">Data de Devolução *</label>
                      <input
                        class="form-input"
                        id="loanCheckoutReturnDate"
                        required=""
                        type="date"
                      />
                    </div>
                    <div class="form-group form-grid-full">
                      <label class="form-label">Observações</label>
                      <textarea
                        class="form-input"
                        id="loanCheckoutNotes"
                        placeholder="Observações sobre o empréstimo, condições especiais, etc. (opcional)"
                        rows="3"
                      ></textarea>
                    </div>
                    <div class="form-grid-full">
                      <button class="btn btn-secondary btn-lg" type="submit">
                        <i class="fas fa-handshake"></i>
                        Registrar Empréstimo -
                        <span id="loanTotalItems">0</span> livros
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header">
                <div>
                  <h2 class="card-title">Controle de Empréstimos</h2>
                  <p class="card-subtitle">
                    Gerencie todos os empréstimos ativos e histórico de
                    devoluções
                  </p>
                </div>
              </div>
              <div class="table-container">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Data Empréstimo</th>
                      <th>Cliente</th>
                      <th>Livro</th>
                      <th>Qtd</th>
                      <th>Prazo Devolução</th>
                      <th>Dias Restantes</th>
                      <th>Status</th>
                      <th>Ações</th>
                    </tr>
                  </thead>
                  <tbody id="loansTableBody"></tbody>
                </table>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>
    

    <div id="toastContainer"></div>

    <script src="Javascript/emprestimos.js"></script>
  </body>
</html>
